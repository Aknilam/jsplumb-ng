<!doctype html>
<html>
<head>
    <title>Angular Directive Example with jsPlumb</title>
    <link rel="stylesheet" href="../bower_components/jsPlumb/dist/css/jsplumb.css">
    <link rel="stylesheet" href="css/style.css">
</head>

<body ng-controller="PlumbCtrl">
    <div id="main">
        <div class="demo flowchart-demo" id="flowchart-demo">
            <div js-plumb-object ng-style="{ 'left':state.x, 'top':state.y }" class="window" ng-repeat="state in stateObjects">
                {{state.name}}
                <div js-plumb-endpoint ng-repeat="endpoint in state.endpoints" anchor="{{endpoint.position}}" uuid="{{endpoint.uuid}}" settings="endpoint.type"></div>
            </div>

            <js-plumb-connection ng-click="showtools=!showtools" ng-repeat="connection in stateConnections" connection="connection">

                <strong>Connection Number {{$index}}</strong>
                <div ng-show="showtools">
                    <span ng-click="removeConnection($index)">Trash</span> |
                    <span ng-click="addTo(connection)">Counter</span> | <em>Count of {{connection.count}}</em>

                </div>

            </js-plumb-connection>
        </div>
    </div>
    <div ng-repeat="connection in stateConnections">
        [ Index {{$index}} ] ==> {{connection.sourceUUID}} -- {{connection.targetUUID}} - <strong ng-click="removeConnection($index)">[X]</strong>
    </div>

    <pre>
        {{stateObjects|json}}
    </pre>

    <!-- quick CDN stuff for angular/touchpunch/jquery/jqueryui -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.2/jquery.ui.touch-punch.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.21/angular.min.js"></script>

    <!-- bower installed -->
    <script src="../bower_components/jsPlumb/dist/js/jquery.jsPlumb-1.6.2-min.js"></script>

    <!-- out local ng stuff -->
    <script src="js/controller.js"></script>
    <script src="js/directives.js"></script>
    <script src="js/app.js"></script>

</body>
</html>